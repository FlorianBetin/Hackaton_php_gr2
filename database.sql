-- MySQL Script generated by MySQL Workbench
-- Thu Nov 24 15:11:52 2022
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema backtrip
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema backtrip
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `backtrip` DEFAULT CHARACTER SET utf8 ;
USE `backtrip` ;

-- -----------------------------------------------------
-- Table `backtrip`.`Epoque`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `backtrip`.`Epoque` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(250) NOT NULL,
  `date` VARCHAR(100) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `backtrip`.`type_article`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `backtrip`.`type_article` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(250) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `backtrip`.`article`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `backtrip`.`article` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(250) NOT NULL,
  `description` TEXT NULL,
  `Epoque_id` INT NOT NULL,
  `type_article_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_article_Epoque_idx` (`Epoque_id` ASC) VISIBLE,
  INDEX `fk_article_type_article1_idx` (`type_article_id` ASC) VISIBLE,
  CONSTRAINT `fk_article_Epoque`
    FOREIGN KEY (`Epoque_id`)
    REFERENCES `backtrip`.`Epoque` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_article_type_article1`
    FOREIGN KEY (`type_article_id`)
    REFERENCES `backtrip`.`type_article` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `backtrip`.`formule`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `backtrip`.`formule` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(250) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `backtrip`.`tarif`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `backtrip`.`tarif` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `montant` INT NULL,
  `formule_id` INT NOT NULL,
  `article_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_tarif_formule1_idx` (`formule_id` ASC) VISIBLE,
  INDEX `fk_tarif_article1_idx` (`article_id` ASC) VISIBLE,
  CONSTRAINT `fk_tarif_formule1`
    FOREIGN KEY (`formule_id`)
    REFERENCES `backtrip`.`formule` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tarif_article1`
    FOREIGN KEY (`article_id`)
    REFERENCES `backtrip`.`article` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `backtrip`.`user`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `backtrip`.`user` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `firstName` VARCHAR(250) NULL,
  `lastName` VARCHAR(250) NULL,
  `e_mail` VARCHAR(250) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `backtrip`.`commande`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `backtrip`.`commande` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `user_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_commande_user1_idx` (`user_id` ASC) VISIBLE,
  CONSTRAINT `fk_commande_user1`
    FOREIGN KEY (`user_id`)
    REFERENCES `backtrip`.`user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `backtrip`.`article_has_commande`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `backtrip`.`article_has_commande` (
  `article_id` INT NOT NULL,
  `commande_id` INT NOT NULL,
  `quantite` INT NOT NULL,
  PRIMARY KEY (`article_id`, `commande_id`),
  INDEX `fk_article_has_commande_commande1_idx` (`commande_id` ASC) VISIBLE,
  INDEX `fk_article_has_commande_article1_idx` (`article_id` ASC) VISIBLE,
  CONSTRAINT `fk_article_has_commande_article1`
    FOREIGN KEY (`article_id`)
    REFERENCES `backtrip`.`article` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_article_has_commande_commande1`
    FOREIGN KEY (`commande_id`)
    REFERENCES `backtrip`.`commande` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

INSERT INTO type_article (`id`, `name`) VALUES
(1,"Personnalité historique"),
(2, "Evénement"), 
(3, "situation du quotidien");

INSERT INTO epoque (`id`, `name`, `date`) VALUES 
(1,"Préhistoire", "xx AVJ JC"),
(2,"Egypte antique", "xx AVJ JC"),
(3,"Rome Antique", "xx AVJ JC"),
(4,"Grèce antique", "xx AVJ JC"),
(5,"Moyen-âge", "xx AVJ JC"),
(6,"Renaissance - Temps modernes", "xx AVJ JC"),
(7,"Epoque contemporaine", "xx AVJ JC"),
(8,"20ème siècle", "xx AVJ JC");


INSERT INTO article (`id`, `name`, `description`, `Epoque_id`, `type_article_id`) VALUES 
(1,"Lucie","Lorem ipsum ",1,1),
(2,"Homme de Cro-Magnon","lorem ipsum",1,1),
(3,"Homme de Néandertal","lorem ipsum",1,1),
(4,"toutankhamon",NULL,2,1),
(5,"hatshepsout",NULL,2,1),
(6,"Cesar",NULL,3,1),
(7,"Auguste",NULL,3,1),
(8,"Spartacus",NULL,3,1),
(9,"Cléopâtre",NULL,3,1),
(10,"Socrate",NULL,4,1),
(11,"Sophocle",NULL,4,1),
(12,"Polus",NULL,4,1),
(13,"Clovis",NULL,5,1),
(14,"Anne de Bretagne",NULL,5,1),
(15,"Jeanne D'Arc",NULL,5,1),
(16,"Christophe Colomb",NULL,6,1),
(17,"Gutemberg",NULL,6,1),
(18,"Catherine de Médicis",NULL,6,1),
(19,"Louis XIV",NULL,6,1),
(20,"Molière",NULL,6,1),
(21,"Lully",NULL,6,1),
(22,"Shakespeare",NULL,6,1),
(23,"Mme de Montespan",NULL,6,1),
(24,"Toussaint Louverture",NULL,6,1),
(25,"Alexandre Dumas",NULL,6,1),
(26,"Napoléon",NULL,7,1),
(27,"Victor Hugo",NULL,7,1),
(28,"Gustave Eiffel",NULL,7,1),
(29,"Lavisse",NULL,7,1),
(30,"Jules Ferry",NULL,7,1),
(31,"Beethoven",NULL,7,1),
(32,"Edmond Rostand",NULL,7,1),
(33,"Marie Curie",NULL,8,1),
(34,"Pablo Picasso",NULL,8,1),
(35,"Frida Khalo",NULL,8,1),
(36,"W. Churchill",NULL,8,1),
(37,"G. De Gaulles",NULL,8,1),
(38,"Clémenceau",NULL,8,1),
(39,"Joséphine Becker",NULL,8,1),
(40,"Découverte du feu",NULL,1,2),
(41,"Fabrication d'outils",NULL,1,2),
(42,"Elevage - Agriculture",NULL,1,2),
(43,"Construction de la pyramide de Gizeh",NULL,2,2),
(44,"Unification Egypte du nord et du sud",NULL,2,2),
(45,"Couronnement de Cléopatre",NULL,3,2),
(46,"Chute de Pompeï",NULL,3,2),
(47,"assasinat de Cesar",NULL,3,2),
(48,"Avénement d'Auguste",NULL,3,2),
(49,"Bataille des Thermopyles",NULL,4,2),
(50,"Le banquet",NULL,4,2),
(51,"Jeux Olympiques à Delphes",NULL,4,2),
(52,"La grande peste",NULL,5,2),
(53,"Baptême de Clovis",NULL,5,2),
(54,"Le pillage de Paris par les vicking",NULL,5,2),
(55,"Découverte de l'Amérique",NULL,6,2),
(56,"Bataille de Marignan",NULL,6,2),
(57,"La révolution Française",NULL,6,2),
(58,"La commune",NULL,7,2),
(59,"Premier vol en Montgolfière",NULL,7,2),
(60,"Premier voyage en train",NULL,7,2),
(61,"Conquête du Far-West",NULL,7,2),
(62,"Première Guerre Mondiale",NULL,8,2),
(63,"Deuxième Guerre Mondiale",NULL,8,2),
(64,"Les années folles",NULL,8,2),
(65,"Premiers pas sur la lune",NULL,8,2),
(66,"Journée de chasse",NULL,1,3),
(67,"Construction d'un premier village",NULL,1,3),
(68,"Fabrication d'un outil en silex",NULL,1,3),
(69,"Scribe",NULL,2,3),
(70,"Ouvrier sur un chantier de pyramide",NULL,2,3),
(71,"Sénateur",NULL,3,3),
(72,"Viticulteur",NULL,3,3),
(73,"Participer à un combat de gladiateur",NULL,3,3),
(74,"Légionnaire",NULL,3,3),
(75,"Vestale",NULL,3,3),
(76,"Mineur d'argent",NULL,4,3),
(77,"Rameur de trirème",NULL,4,3),
(78,"Prière dans un temple",NULL,4,3),
(79,"Hilote",NULL,4,3),
(80,"Archonte",NULL,4,3),
(81,"Moine",NULL,5,3),
(82,"Paysan",NULL,5,3),
(83,"Carnaval",NULL,5,3),
(84,"Marche",NULL,5,3),
(85,"Verrier",NULL,6,3),
(86,"Drapier",NULL,6,3),
(87,"Pirate",NULL,6,3),
(88,"Courtisan du roi",NULL,6,3),
(89,"Mineur",NULL,7,3),
(90,"Orpailleur",NULL,7,3),
(91,"Galérien",NULL,7,3),
(92,"Soldat",NULL,7,3),
(93,"Voyager à bord du Titanic",NULL,8,3),
(94,"Concert des Beatles en live",NULL,8,3),
(95,"Revivre Woodstock",NULL,8,3);


INSERT INTO formule (`id`, `name`) VALUES 
(1,"Basic"),
(2,"Premium"),
(3,"DeLuxe");

INSERT INTO tarif  (`id`, `montant`, `formule_id`, `article_id`) VALUES 
(1, 10, 1, 1),
(2, 50, 2, 1),
(3, 200, 3, 1),
(4, 10, 1, 2),
(5, 50, 2, 2),
(6, 200, 3, 2),
(7, 10, 1, 3),
(8, 50, 2, 3),
(9, 200, 3, 3),
(10,20, 1, 4),
(11, 70, 2, 4),
(12, 300, 3, 4),
(13, 30, 1, 5),
(14, 80, 2, 5),
(15, 500, 3, 5),
(16, 80, 1, 6),
(17, 90, 2, 6),
(18, 700, 3, 6);

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;